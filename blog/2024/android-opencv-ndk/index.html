<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Android Opencv Ndk | 计算机视觉 </title> <meta name="author" content="Erkang Chen"> <meta name="description" content="简要介绍"> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link defer href="/assets/css/bootstrap-toc.min.css?6f5af0bb9aab25d79b2448143cbeaa88" rel="stylesheet"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://cekxm.github.io/blog/2024/android-opencv-ndk/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> 计算机视觉 </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="row"> <div class="col-sm-3"> <nav id="toc-sidebar" class="sticky-top"></nav> </div> <div class="col-sm-9"> <div class="post"> <header class="post-header"> <h1 class="post-title">Android Opencv Ndk</h1> <p class="post-meta"> Created in December 29, 2024 </p> <p class="post-tags"> <a href="/blog/2024"> <i class="fa-solid fa-calendar fa-sm"></i> 2024 </a> </p> </header> <article class="post-content"> <div id="markdown-content"> <h2 id="android-studio-安装">Android studio 安装</h2> <ol> <li>一般是下载最新稳定版，比如目前的最新稳定版是</li> <li> <strong>不用提前安装 JDK 和 JRE</strong>，android studio 自带，<strong>也不用再设置环境变量 JAVA_HOME, CLASSPATH, PATH</strong> </li> <li>安装，选默认设置，会安装很多东西（settings -&gt; system settings -&gt; Android SDK），需要提前准备大量剩余空间 <ul> <li>SDK Platforms（就是 API level，和安卓版本号不同），可以安装比较新的，比如33。而 minSdkVersion 决定了可以安装的最低 API，NDK 要求最低为 21 <ul> <li>System image 这个是为了建立 AVD模拟器需要的，<a href="https://developer.android.google.cn/studio/releases/platforms?hl=zh-cn" rel="external nofollow noopener" target="_blank">有各种版本区别</a> </li> </ul> </li> <li>SDK Tools，版本号和 sdk platforms 版本号不一定要对应，可以安装最新版本，可能随项目要求它会自动下载一些其他版本，随缘吧</li> </ul> </li> </ol> <h3 id="安装-ndk">安装 NDK</h3> <p>可以安装最新版本，可能随项目要求它会自动下载一些其他版本，随缘吧</p> <p><img class="img-fluid" src="/images/2024-12-30-android-opencv-ndk/image-20230721185423109.png" alt="image-20230721185423109" style="zoom: 50%;"></p> <p><img class="img-fluid" src="/images/2024-12-30-android-opencv-ndk/image-20230721185451551.png" alt="image-20230721185451551" style="zoom:50%;"></p> <p><img class="img-fluid" src="/images/2024-12-30-android-opencv-ndk/image-20230721185508339.png" alt="image-20230721185508339" style="zoom:50%;"></p> <p><img class="img-fluid" src="/images/2024-12-30-android-opencv-ndk/image-20230721185533927.png" alt="image-20230721185533927" style="zoom:50%;"></p> <h3 id="其他">其他：</h3> <h4 id="解决android-studio-build-output-输出的中文显示乱码"><a href="https://blog.csdn.net/weixin_43782998/article/details/119718959" rel="external nofollow noopener" target="_blank">解决Android Studio Build Output 输出的中文显示乱码</a></h4> <h2 id="安装及配置-opencv-android-sdk">安装及配置 OpenCV android sdk</h2> <h3 id="参考资料">参考资料</h3> <p>这一部分是比较麻烦的，主要参考以下网页：</p> <ol> <li><a href="https://coskxlabsite.stars.ne.jp/html/android/OpenCVpreview/OpenCVpreview_A.html" rel="external nofollow noopener" target="_blank">Android OpenCV4.8.0のカメラプレビュー（tutorialを基に）</a></li> <li><a href="https://juejin.cn/post/6972167812445896735" rel="external nofollow noopener" target="_blank">OpenCV On Android最佳环境配置指南(Android Studio篇)</a></li> <li><a href="https://blog.csdn.net/qq_41885673/article/details/115324283" rel="external nofollow noopener" target="_blank">OpenCV 在 Android Studio 的使用教程</a></li> </ol> <p>配置过程</p> <p>cv::FaceDetectorYN cv::FaceRecognizerSF 要求最低 4.5.4，本次选用 opencv-4.5.5-android-sdk.zip</p> <p>选择更高版本应该没有问题。</p> <p>配置的过程，就是建立project的过程。</p> <h3 id="new-project-native-c">new project-&gt;native C++</h3> <p><img src="/images/2024-12-30-android-opencv-ndk/image-20230721190740698.png" alt="image-20230721190740698" class="img-fluid"></p> <h3 id="file-new-import-module">file-&gt;new-&gt;import module</h3> <p><img src="/images/2024-12-30-android-opencv-ndk/image-20230721191139114.png" alt="image-20230721191139114" class="img-fluid"></p> <p>注意是已 sdk 为结尾</p> <h4 id="kotlin-问题">Kotlin 问题</h4> <p>现在还没导入成功，会报错 &gt; Plugin with id ‘kotlin-android’ not found.</p> <p>因为这一步会把整个 sdk 文件夹拷贝到工程目录，所以注意修改工程目录/opencv下的 gradle，而不是被拷贝的那个库的文件。因为还没导入成功，所以在 android 页还看不到 opencv，切换到 project 页</p> <p><img src="/images/2024-12-30-android-opencv-ndk/image-20230721191625330.png" alt="image-20230721191625330" class="img-fluid"></p> <p>注释 apply plugin: ‘kotlin-android’</p> <p>然后在 build.gradle(Project: xxxx) 添加</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>buildscript {
    dependencies {
        classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:1.7.20"
    }
}
</code></pre></div></div> <p>注意这边的版本可以用 everything 找一下，和电脑中下载的要相同。</p> <h4 id="namespace-问题">namespace 问题</h4> <p>做到这一步，如果编译，会提示 Namespace not specified.</p> <p>修改 opencv/build.gradle，增加一句话</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>android {
    namespace 'org.opencv'
    compileSdkVersion 26
</code></pre></div></div> <p>opencv 这儿 sdk 版本是26。在此阶段，最好将 Gradle Script/build.gradle （Module OpenCV） 中的 compileSdkVersion targetSdkVersion 更改为和app一样的版本</p> <p><img src="/images/2024-12-30-android-opencv-ndk/image-20230721193557426.png" alt="image-20230721193557426" class="img-fluid"></p> <p>现在 Android 页中可以看到 opencv 出来了，则导入算成功了。</p> <h3 id="为app添加opencv-module依赖">为app添加opencv module依赖</h3> <p>选中app，Open module settings -&gt; Dependencies</p> <p>为app添加 module依赖，选择 Opencv</p> <h2 id="app-的-java-部分">App 的 Java 部分</h2> <p>接下来我们要建一个通用的 activity 和 layout。后面这部分就尽量不修改。</p> <h3 id="androidmanifestxml文件中添加权限">AndroidManifest.xml文件中添加权限</h3> <p>主要有摄像头权限、存储权限</p> <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;manifest</span> <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
    <span class="na">xmlns:tools=</span><span class="s">"http://schemas.android.com/tools"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">"android.permission.WRITE_EXTERNAL_STORAGE"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">"android.permission.CAMERA"</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;uses-feature</span>
        <span class="na">android:name=</span><span class="s">"android.hardware.camera"</span>
        <span class="na">android:required=</span><span class="s">"false"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;uses-feature</span>
        <span class="na">android:name=</span><span class="s">"android.hardware.camera.autofocus"</span>
        <span class="na">android:required=</span><span class="s">"false"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;uses-feature</span>
        <span class="na">android:name=</span><span class="s">"android.hardware.camera.front"</span>
        <span class="na">android:required=</span><span class="s">"false"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;uses-feature</span>
        <span class="na">android:name=</span><span class="s">"android.hardware.camera.front.autofocus"</span>
        <span class="na">android:required=</span><span class="s">"false"</span> <span class="nt">/&gt;</span>
</code></pre></div></div> <h4 id="问题1orgopencvengine-不存在">问题1：org.opencv.engine 不存在</h4> <p>此时编译会碰到 OpenCVEngineInterface 错误了：程序包org.opencv.engine不存在</p> <p>它是 opencv android sdk 的问题。</p> <p>打开 opencv build.gradle，在 externalNativeBuild后面添加 buildFeatures</p> <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    externalNativeBuild {
        cmake {
            path (project.projectDir.toString() + '/libcxx_helper/CMakeLists.txt')
        }
    }

    buildFeatures {
        aidl true
    }
</code></pre></div></div> <h4 id="问题2找不到-orgopencvbuildconfig">问题2：找不到 org.opencv.BuildConfig</h4> <p>在 gradle.properties 中增加一句话</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>android.defaults.buildfeatures.buildconfig=true
</code></pre></div></div> <p><img src="/images/2024-12-30-android-opencv-ndk/image-20230721200131762.png" alt="image-20230721200131762" class="img-fluid"></p> <h3 id="activity_mainxml-layout">activity_main.xml Layout</h3> <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;androidx.constraintlayout.widget.ConstraintLayout</span> <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
    <span class="na">xmlns:app=</span><span class="s">"http://schemas.android.com/apk/res-auto"</span>
    <span class="na">xmlns:tools=</span><span class="s">"http://schemas.android.com/tools"</span>
    <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
    <span class="na">android:layout_height=</span><span class="s">"match_parent"</span>
    <span class="na">tools:context=</span><span class="s">".MainActivity"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;org.opencv.android.JavaCameraView</span>
        <span class="na">android:id=</span><span class="s">"@+id/javaCameraView"</span>
        <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
        <span class="na">android:layout_height=</span><span class="s">"match_parent"</span>
        <span class="na">app:camera_id=</span><span class="s">"back"</span>
        <span class="na">app:show_fps=</span><span class="s">"true"</span> <span class="nt">/&gt;</span>

<span class="nt">&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;</span>
</code></pre></div></div> <h3 id="mainactivityjava">MainActivity.java</h3> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.example.cvapp</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">androidx.appcompat.app.AppCompatActivity</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.io.File</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.FileOutputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.InputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Collections</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">android.os.Bundle</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.widget.TextView</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.view.SurfaceView</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.opencv.android.BaseLoaderCallback</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.opencv.android.CameraActivity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.opencv.android.CameraBridgeViewBase.CvCameraViewFrame</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.opencv.android.LoaderCallbackInterface</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.opencv.android.OpenCVLoader</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.opencv.core.Core</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.opencv.core.Mat</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.opencv.core.MatOfRect</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.opencv.core.Rect</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.opencv.core.Scalar</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.opencv.core.Size</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.opencv.android.CameraBridgeViewBase</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.opencv.android.CameraBridgeViewBase.CvCameraViewListener2</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.opencv.objdetect.CascadeClassifier</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.opencv.imgproc.Imgproc</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.opencv.android.JavaCameraView</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.example.cvapp.databinding.ActivityMainBinding</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainActivity</span> <span class="kd">extends</span> <span class="nc">CameraActivity</span> <span class="kd">implements</span> <span class="nc">CameraBridgeViewBase</span><span class="o">.</span><span class="na">CvCameraViewListener2</span> <span class="o">{</span>

    <span class="c1">// Used to load the 'cvapp' library on application startup.</span>
    <span class="kd">static</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">loadLibrary</span><span class="o">(</span><span class="s">"cvapp"</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="kd">private</span> <span class="nc">JavaCameraView</span> <span class="n">javaCameraView</span><span class="o">;</span>

    <span class="kd">private</span> <span class="nc">BaseLoaderCallback</span> <span class="n">baseLoaderCallback</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BaseLoaderCallback</span><span class="o">(</span><span class="k">this</span><span class="o">)</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onManagerConnected</span><span class="o">(</span><span class="kt">int</span> <span class="n">status</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">switch</span> <span class="o">(</span><span class="n">status</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">case</span> <span class="nc">LoaderCallbackInterface</span><span class="o">.</span><span class="na">SUCCESS</span><span class="o">:</span> <span class="o">{</span>
                    <span class="n">javaCameraView</span><span class="o">.</span><span class="na">enableView</span><span class="o">();</span>
                <span class="o">}</span>
                <span class="k">break</span><span class="o">;</span>
                <span class="k">default</span><span class="o">:</span>
                    <span class="kd">super</span><span class="o">.</span><span class="na">onManagerConnected</span><span class="o">(</span><span class="n">status</span><span class="o">);</span>
                    <span class="k">break</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">};</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="nc">List</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="nc">CameraBridgeViewBase</span><span class="o">&gt;</span> <span class="nf">getCameraViewList</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">CameraBridgeViewBase</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
        <span class="n">list</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">javaCameraView</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">list</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="nc">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>
        <span class="n">setContentView</span><span class="o">(</span><span class="no">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">activity_main</span><span class="o">);</span>
        <span class="n">javaCameraView</span> <span class="o">=</span> <span class="n">findViewById</span><span class="o">(</span><span class="no">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">javaCameraView</span><span class="o">);</span>
        <span class="n">javaCameraView</span><span class="o">.</span><span class="na">setVisibility</span><span class="o">(</span><span class="nc">SurfaceView</span><span class="o">.</span><span class="na">VISIBLE</span><span class="o">);</span>
        <span class="n">javaCameraView</span><span class="o">.</span><span class="na">setCvCameraViewListener</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onPause</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onPause</span><span class="o">();</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">javaCameraView</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">javaCameraView</span><span class="o">.</span><span class="na">disableView</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onResume</span><span class="o">()</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onResume</span><span class="o">();</span>
        <span class="k">if</span> <span class="o">(!</span><span class="nc">OpenCVLoader</span><span class="o">.</span><span class="na">initDebug</span><span class="o">())</span> <span class="o">{</span>
            <span class="nc">OpenCVLoader</span><span class="o">.</span><span class="na">initAsync</span><span class="o">(</span><span class="nc">OpenCVLoader</span><span class="o">.</span><span class="na">OPENCV_VERSION</span><span class="o">,</span> <span class="k">this</span><span class="o">,</span> <span class="n">baseLoaderCallback</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">baseLoaderCallback</span><span class="o">.</span><span class="na">onManagerConnected</span><span class="o">(</span><span class="nc">LoaderCallbackInterface</span><span class="o">.</span><span class="na">SUCCESS</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onCameraViewStarted</span><span class="o">(</span><span class="kt">int</span> <span class="n">width</span><span class="o">,</span> <span class="kt">int</span> <span class="n">height</span><span class="o">)</span> <span class="o">{</span>

    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onCameraViewStopped</span><span class="o">()</span> <span class="o">{</span>

    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">Mat</span> <span class="nf">onCameraFrame</span><span class="o">(</span><span class="nc">CameraBridgeViewBase</span><span class="o">.</span><span class="na">CvCameraViewFrame</span> <span class="n">inputFrame</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">inputFrame</span><span class="o">.</span><span class="na">gray</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p>注意：</p> <ol> <li> <strong>此时可以可以运行程序了</strong>，这是一个播放摄像头视频的程序，并把图像变成黑白</li> <li>但是现在是纯java的，还没涉及到 c++ 部分</li> <li>代码里面有几行，是引入 c++ 库，但是实际上这个时候还没用到</li> </ol> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">static</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">loadLibrary</span><span class="o">(</span><span class="s">"cvapp"</span><span class="o">);</span>
    <span class="o">}</span>
</code></pre></div></div> <h2 id="opencv-ndk-部分">OpenCV NDK 部分</h2> <h3 id="配置">配置</h3> <p>OpenCV-android-sdk\sdk\build.gradle 这个文件前头的注释很重要，推荐详细阅读。</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Add module into Android Studio application project:

- Android Studio way:
  (will copy almost all OpenCV Android SDK into your project, ~200Mb)

  Import module: Menu -&gt; "File" -&gt; "New" -&gt; "Module" -&gt; "Import Gradle project":
  Source directory: select this "sdk" directory
  Module name: ":opencv"

- or attach library module from OpenCV Android SDK
  (without copying into application project directory, allow to share the same module between projects)

  Edit "settings.gradle" and add these lines:

  def opencvsdk='&lt;path_to_opencv_android_sdk_rootdir&gt;'
  // You can put declaration above into gradle.properties file instead (including file in HOME directory),
  // but without 'def' and apostrophe symbols ('): opencvsdk=&lt;path_to_opencv_android_sdk_rootdir&gt;
  include ':opencv'
  project(':opencv').projectDir = new File(opencvsdk + '/sdk')
</code></pre></div></div> <p>可以看出，这边有两种方法，android studio 的方法，会将 sdk 拷贝到工程中。第二种方法则没有拷贝，多个工程可以共用。这一步前面已经做了，这儿不用再做。</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Add dependency into application module:

- Android Studio way:
  "Open Module Settings" (F4) -&gt; "Dependencies" tab

- or add "project(':opencv')" dependency into app/build.gradle:

  dependencies {
      implementation fileTree(dir: 'libs', include: ['*.jar'])
      ...
      implementation project(':opencv')
  }
</code></pre></div></div> <p>这一步前面也做了，采用 Android studio 方法。</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Load OpenCV native library before using:

- avoid using of "OpenCVLoader.initAsync()" approach - it is deprecated
  It may load library with different version (from OpenCV Android Manager, which is installed separatelly on device)

- use "System.loadLibrary("opencv_java4")" or "OpenCVLoader.initDebug()"
  TODO: Add accurate API to load OpenCV native library
</code></pre></div></div> <p>这一步是在 java 代码中。</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Native C++ support (necessary to use OpenCV in native code of application only):

- Use find_package() in app/CMakeLists.txt:

  find_package(OpenCV 4.5 REQUIRED java)
  ...
  target_link_libraries(native-lib ${OpenCV_LIBRARIES})

- Add "OpenCV_DIR" and enable C++ exceptions/RTTI support via app/build.gradle
  Documentation about CMake options: https://developer.android.com/ndk/guides/cmake.html

  defaultConfig {
      ...
      externalNativeBuild {
          cmake {
              cppFlags "-std=c++11 -frtti -fexceptions"
              arguments "-DOpenCV_DIR=" + opencvsdk + "/sdk/native/jni" // , "-DANDROID_ARM_NEON=TRUE"
          }
      }
  }

- (optional) Limit/filter ABIs to build ('android' scope of 'app/build.gradle'):
  Useful information: https://developer.android.com/studio/build/gradle-tips.html (Configure separate APKs per ABI)

  splits {
      abi {
          enable true
          universalApk false
          reset()
          include 'armeabi-v7a' // , 'x86', 'x86_64', 'arm64-v8a'
      }
  }
</code></pre></div></div> <p>可以看到有两个步骤是必须的，第三个步骤是可选的。</p> <ol> <li>app/CMakeLists.txt</li> <li>app/build.gradle</li> </ol> <p>按上面做，没错。其中 externalNativeBuild 是在 defaultConfig 里</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>android {
    namespace 'com.example.cvapp'
    compileSdk 33

    defaultConfig {
        applicationId "com.example.cvapp"
        minSdk 21
        targetSdk 33
        versionCode 1
        versionName "1.0"

        testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner"

        externalNativeBuild {
            cmake {
                cppFlags "-std=c++11 -frtti -fexceptions"
                arguments "-DOpenCV_DIR=D:/library/OpenCV-android-sdk/sdk/native/jni" // , "-DANDROID_ARM_NEON=TRUE"
            }
        }
    }
</code></pre></div></div> <h3 id="java-端">java 端</h3> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">Mat</span> <span class="nf">onCameraFrame</span><span class="o">(</span><span class="nc">CameraBridgeViewBase</span><span class="o">.</span><span class="na">CvCameraViewFrame</span> <span class="n">inputFrame</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">mRgba</span> <span class="o">=</span> <span class="n">inputFrame</span><span class="o">.</span><span class="na">rgba</span><span class="o">();</span>
        <span class="n">mGray</span> <span class="o">=</span> <span class="n">inputFrame</span><span class="o">.</span><span class="na">gray</span><span class="o">();</span>
        <span class="nc">Log</span><span class="o">.</span><span class="na">i</span><span class="o">(</span><span class="s">"cvapp"</span><span class="o">,</span> <span class="s">"onCameraFrame "</span><span class="o">+</span><span class="n">mRgba</span><span class="o">.</span><span class="na">width</span><span class="o">());</span>

        <span class="nc">FindFeatures</span><span class="o">(</span><span class="n">mGray</span><span class="o">.</span><span class="na">getNativeObjAddr</span><span class="o">(),</span> <span class="n">mRgba</span><span class="o">.</span><span class="na">getNativeObjAddr</span><span class="o">());</span>
        <span class="k">return</span> <span class="n">mRgba</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">native</span> <span class="kt">void</span> <span class="nf">FindFeatures</span><span class="o">(</span><span class="kt">long</span> <span class="n">matAddrGr</span><span class="o">,</span> <span class="kt">long</span> <span class="n">matAddrRgba</span><span class="o">);</span>
</code></pre></div></div> <p>一般是在 onCameraFrame 调用 c++ 函数。传送的 mat 的地址</p> <h3 id="c-端">c++ 端</h3> <p>java 端写好后，会报错，因为 c++ 端还没相应函数。此时右键点击源码错误位置，可让AS自动生成相应C++函数。</p> <p>jni 接口一般返回void，参数是mat 的地址，所以对这个mat的修改是会成呈现到java端。</p> <div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">extern</span> <span class="s">"C"</span>
<span class="n">JNIEXPORT</span> <span class="kt">void</span> <span class="n">JNICALL</span>
<span class="nf">Java_com_example_cvapp_MainActivity_FindFeatures</span><span class="p">(</span><span class="n">JNIEnv</span> <span class="o">*</span><span class="n">env</span><span class="p">,</span> <span class="n">jobject</span> <span class="n">thiz</span><span class="p">,</span> <span class="n">jlong</span> <span class="n">mat_addr_gr</span><span class="p">,</span>
                                                 <span class="n">jlong</span> <span class="n">mat_addr_rgba</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// TODO: implement FindFeatures()</span>
    <span class="n">Mat</span><span class="o">&amp;</span> <span class="n">mGr</span>  <span class="o">=</span> <span class="o">*</span><span class="p">(</span><span class="n">Mat</span><span class="o">*</span><span class="p">)</span><span class="n">mat_addr_gr</span><span class="p">;</span>
    <span class="n">Mat</span><span class="o">&amp;</span> <span class="n">mRgb</span> <span class="o">=</span> <span class="o">*</span><span class="p">(</span><span class="n">Mat</span><span class="o">*</span><span class="p">)</span><span class="n">mat_addr_rgba</span><span class="p">;</span>
    
    <span class="c1">// 直接修改 mRgb</span>
</code></pre></div></div> <h3 id="jni-调用-c类">JNI 调用 c++类</h3> <p><a href="https://blog.csdn.net/xiaohan2909/article/details/50152997" rel="external nofollow noopener" target="_blank">JNI调用C++类的方式</a></p> <p>C++ 功能类和 JNI 可以做到分离，不用再创建 JNI 类（不知道有没有 JNI 类）。</p> <p>可以建立一个 Java 类。也可以没有 java类，则相应的对象生成和销毁要放在 activity 中。</p> <h2 id="摄像头采集和问题解决">摄像头采集和问题解决</h2> <p>摄像头采集使用 opencv 的类。但会有一些问题。更灵活的解决方式要掌握底层的 Camera</p> <ol> <li><a href="https://developer.android.google.cn/guide/topics/media/camera?hl=zh-cn" rel="external nofollow noopener" target="_blank">Camera API</a></li> <li><a href="https://developer.android.google.cn/reference/android/hardware/camera2/package-summary" rel="external nofollow noopener" target="_blank">android.hardware.camera2</a></li> </ol> <p><img class="img-fluid" src="/images/2024-12-30-android-opencv-ndk/image-20230722141843054.png" alt="image-20230722141843054" style="zoom:80%;"></p> <h3 id="opencv之调用设备摄像头">OpenCV之调用设备摄像头</h3> <p>根据 OpenCV-android-sdk\samples\face-detection 例程，总结如下</p> <ol> <li>layout 中显示部分使用了 org.opencv.android.JavaCameraView</li> <li>activity 为 CameraActivity（注意是 org.opencv.android 的CameraActivity），同时实现了 CameraBridgeViewBase.CvCameraViewListener2 接口</li> <li> <strong>JavaCameraView继承自CameraBridgeViewBase，CameraBridgeViewBase又继承自SurfaceView</strong>，JavaCameraView是可以显示摄像头捕获到的帧数据的View，CameraBridgeViewBase类中CvCameraViewListener2接口提供了摄像头onCameraViewStarted、onCameraViewStopped以及onCameraFrame回调。<strong>我们要对摄像头捕获的每一帧数据进行操作就需要在OnCameraFrame回调中进行处理。</strong> </li> <li>CameraActivity 继承了 android.app.Activity</li> </ol> <p>参考：</p> <ol> <li>OpenCV-android-sdk\samples\face-detection 例程</li> <li><a href="https://www.jianshu.com/p/3462dac8a876" rel="external nofollow noopener" target="_blank">android中使用OpenCV之调用设备摄像头</a></li> <li> <a href="https://blog.csdn.net/chy555chy/article/details/106788660" rel="external nofollow noopener" target="_blank">OpenCV4 Android 调用摄像头_opencv4调用手机摄像头</a> 这一篇感觉有些东西，看看</li> </ol> <blockquote> <ol> <li>首先，要继承 CameraActivity，之前已经说过了。这个基类会去申请权限，然后通知 javaCameraView 已获取到权限，可以正常使用。</li> <li>复写父类的 getCameraViewList 方法，将 javaCameraView 回送回去，这样当权限已被赋予时，就可以通知到预览界面开始正常工作了。</li> <li>OpenCV 已经为我们实现了 Camera 和 Camera2 的函数，如果应用最低版本 minSdkVersion &gt; 5.0，建议使用 JavaCamera2View 的相关函数，否则使用 JavaCameraView。</li> <li>在 onResume 时判断 opencv 库是否加载完毕，然后启用预览视图。在 onPause 时由于界面被遮挡，此时应该暂停摄像头的预览以节省手机性能和电量损耗。</li> <li>切换前后摄像头时，要先禁用，设置完后启用才会生效。</li> <li>Camera2 和 Camera 的绝大部分差异 OpenCV 均已经为我们屏蔽在类的内部了，唯一的差别就是两者实现的 CvCameraViewListener 监听器里的预览函数 onCameraFrame 的参数略有不同。从下面的源码可以看出 CvCameraViewListener2 的 inputFrame 由 Mat 类型改为了 CvCameraViewFrame 类型，它额外提供了一个转化为灰度图的接口。</li> </ol> </blockquote> <h3 id="图像采集时方向和大小问题">图像采集时方向和大小问题</h3> <h4 id="选择主摄像头或前置">选择主摄像头或前置</h4> <p>在 layout 文件中</p> <h4 id="图像方向">图像方向</h4> <p>opencv android 获取的图像是 landscape 的，我参照下面几个网页，做了个临时解决方案，这种解决方案是修改底层 CameraBridgeViewBase 代码，仅涉及到渲染时进行旋转和缩放，但是更底层的解决方案应该是控制 camera，以后再改善。</p> <p>修改 opencv CameraBridgeViewBase 类的 deliverAndDrawFrame 方法</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">deliverAndDrawFrame</span><span class="o">(</span><span class="nc">CvCameraViewFrame</span> <span class="n">frame</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Mat</span> <span class="n">modified</span><span class="o">;</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">mListener</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">modified</span> <span class="o">=</span> <span class="n">mListener</span><span class="o">.</span><span class="na">onCameraFrame</span><span class="o">(</span><span class="n">frame</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">modified</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="na">rgba</span><span class="o">();</span>
        <span class="o">}</span>

        <span class="kt">boolean</span> <span class="n">bmpValid</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">modified</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="nc">Utils</span><span class="o">.</span><span class="na">matToBitmap</span><span class="o">(</span><span class="n">modified</span><span class="o">,</span> <span class="n">mCacheBitmap</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">catch</span><span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="nc">Log</span><span class="o">.</span><span class="na">e</span><span class="o">(</span><span class="no">TAG</span><span class="o">,</span> <span class="s">"Mat type: "</span> <span class="o">+</span> <span class="n">modified</span><span class="o">);</span>
                <span class="nc">Log</span><span class="o">.</span><span class="na">e</span><span class="o">(</span><span class="no">TAG</span><span class="o">,</span> <span class="s">"Bitmap type: "</span> <span class="o">+</span> <span class="n">mCacheBitmap</span><span class="o">.</span><span class="na">getWidth</span><span class="o">()</span> <span class="o">+</span> <span class="s">"*"</span> <span class="o">+</span> <span class="n">mCacheBitmap</span><span class="o">.</span><span class="na">getHeight</span><span class="o">());</span>
                <span class="nc">Log</span><span class="o">.</span><span class="na">e</span><span class="o">(</span><span class="no">TAG</span><span class="o">,</span> <span class="s">"Utils.matToBitmap() throws an exception: "</span> <span class="o">+</span> <span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
                <span class="n">bmpValid</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">bmpValid</span> <span class="o">&amp;&amp;</span> <span class="n">mCacheBitmap</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">Canvas</span> <span class="n">canvas</span> <span class="o">=</span> <span class="n">getHolder</span><span class="o">().</span><span class="na">lockCanvas</span><span class="o">();</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">canvas</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">canvas</span><span class="o">.</span><span class="na">drawColor</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">android</span><span class="o">.</span><span class="na">graphics</span><span class="o">.</span><span class="na">PorterDuff</span><span class="o">.</span><span class="na">Mode</span><span class="o">.</span><span class="na">CLEAR</span><span class="o">);</span>
                <span class="k">if</span> <span class="o">(</span><span class="nc">BuildConfig</span><span class="o">.</span><span class="na">DEBUG</span><span class="o">)</span>
                    <span class="nc">Log</span><span class="o">.</span><span class="na">d</span><span class="o">(</span><span class="no">TAG</span><span class="o">,</span> <span class="s">"mStretch value: "</span> <span class="o">+</span> <span class="n">mScale</span><span class="o">);</span>

<span class="c1">//                if (mScale != 0) {</span>
<span class="c1">//                    canvas.drawBitmap(mCacheBitmap, new Rect(0,0,mCacheBitmap.getWidth(), mCacheBitmap.getHeight()),</span>
<span class="c1">//                         new Rect((int)((canvas.getWidth() - mScale*mCacheBitmap.getWidth()) / 2),</span>
<span class="c1">//                         (int)((canvas.getHeight() - mScale*mCacheBitmap.getHeight()) / 2),</span>
<span class="c1">//                         (int)((canvas.getWidth() - mScale*mCacheBitmap.getWidth()) / 2 + mScale*mCacheBitmap.getWidth()),</span>
<span class="c1">//                         (int)((canvas.getHeight() - mScale*mCacheBitmap.getHeight()) / 2 + mScale*mCacheBitmap.getHeight())), null);</span>
<span class="c1">//                } else {</span>
<span class="c1">//                     canvas.drawBitmap(mCacheBitmap, new Rect(0,0,mCacheBitmap.getWidth(), mCacheBitmap.getHeight()),</span>
<span class="c1">//                         new Rect((canvas.getWidth() - mCacheBitmap.getWidth()) / 2,</span>
<span class="c1">//                         (canvas.getHeight() - mCacheBitmap.getHeight()) / 2,</span>
<span class="c1">//                         (canvas.getWidth() - mCacheBitmap.getWidth()) / 2 + mCacheBitmap.getWidth(),</span>
<span class="c1">//                         (canvas.getHeight() - mCacheBitmap.getHeight()) / 2 + mCacheBitmap.getHeight()), null);</span>
<span class="c1">//                }</span>

                <span class="c1">//  Start of the fix</span>
                <span class="nc">Matrix</span> <span class="n">matrix</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Matrix</span><span class="o">();</span>
                <span class="n">matrix</span><span class="o">.</span><span class="na">preTranslate</span><span class="o">(</span> <span class="o">(</span> <span class="n">canvas</span><span class="o">.</span><span class="na">getWidth</span><span class="o">()</span> <span class="o">-</span> <span class="n">mCacheBitmap</span><span class="o">.</span><span class="na">getWidth</span><span class="o">()</span> <span class="o">)</span> <span class="o">/</span> <span class="mi">2</span><span class="n">f</span><span class="o">,</span> <span class="o">(</span> <span class="n">canvas</span><span class="o">.</span><span class="na">getHeight</span><span class="o">()</span> <span class="o">-</span> <span class="n">mCacheBitmap</span><span class="o">.</span><span class="na">getHeight</span><span class="o">()</span> <span class="o">)</span> <span class="o">/</span> <span class="mi">2</span><span class="n">f</span> <span class="o">);</span>
                <span class="n">matrix</span><span class="o">.</span><span class="na">postRotate</span><span class="o">(</span> <span class="o">-</span><span class="mi">90</span><span class="n">f</span><span class="o">,</span> <span class="n">canvas</span><span class="o">.</span><span class="na">getWidth</span><span class="o">()</span> <span class="o">/</span> <span class="mi">2</span><span class="n">f</span><span class="o">,</span> <span class="n">canvas</span><span class="o">.</span><span class="na">getHeight</span><span class="o">()</span> <span class="o">/</span> <span class="mi">2</span><span class="n">f</span> <span class="o">);</span>
                <span class="kt">float</span> <span class="n">scale</span> <span class="o">=</span> <span class="o">(</span><span class="kt">float</span><span class="o">)</span> <span class="n">canvas</span><span class="o">.</span><span class="na">getWidth</span><span class="o">()</span> <span class="o">/</span> <span class="o">(</span><span class="kt">float</span><span class="o">)</span> <span class="n">mCacheBitmap</span><span class="o">.</span><span class="na">getHeight</span><span class="o">();</span>
                <span class="n">matrix</span><span class="o">.</span><span class="na">postScale</span><span class="o">(</span><span class="n">scale</span><span class="o">,</span> <span class="n">scale</span><span class="o">,</span> <span class="n">canvas</span><span class="o">.</span><span class="na">getWidth</span><span class="o">()</span> <span class="o">/</span> <span class="mi">2</span><span class="n">f</span> <span class="o">,</span> <span class="n">canvas</span><span class="o">.</span><span class="na">getHeight</span><span class="o">()</span> <span class="o">/</span> <span class="mi">2</span><span class="n">f</span> <span class="o">);</span>
                <span class="n">canvas</span><span class="o">.</span><span class="na">drawBitmap</span><span class="o">(</span> <span class="n">mCacheBitmap</span><span class="o">,</span> <span class="n">matrix</span><span class="o">,</span> <span class="kc">null</span> <span class="o">);</span>
                <span class="c1">// End of the fix</span>

                <span class="k">if</span> <span class="o">(</span><span class="n">mFpsMeter</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">mFpsMeter</span><span class="o">.</span><span class="na">measure</span><span class="o">();</span>
                    <span class="n">mFpsMeter</span><span class="o">.</span><span class="na">draw</span><span class="o">(</span><span class="n">canvas</span><span class="o">,</span> <span class="mi">20</span><span class="o">,</span> <span class="mi">30</span><span class="o">);</span>
                <span class="o">}</span>
                <span class="n">getHolder</span><span class="o">().</span><span class="na">unlockCanvasAndPost</span><span class="o">(</span><span class="n">canvas</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
</code></pre></div></div> <p>其中，注释部分是原来的， fix 之间是新增的。</p> <h5 id="todo">TODO：</h5> <p>这边可能还有一个左右翻转的问题，需要再加一个 scale -1。后续有空再改</p> <p>参考</p> <ol> <li>这个地方有个 <a href="https://stackoverflow.com/questions/14816166/rotate-camera-preview-to-portrait-android-opencv-camera/57181157#57181157" rel="external nofollow noopener" target="_blank">fix Rotate camera preview to Portrait Android OpenCV Camera</a> </li> <li> <a href="https://android.googlesource.com/platform/frameworks/base/+/75efd5d/graphics/java/android/graphics/Matrix.java" rel="external nofollow noopener" target="_blank">android.graphics.Matrix</a> 说明</li> <li><a href="https://medium.com/a-problem-like-maria/understanding-android-matrix-transformations-25e028f56dc7#id_token=eyJhbGciOiJSUzI1NiIsImtpZCI6ImEzYmRiZmRlZGUzYmFiYjI2NTFhZmNhMjY3OGRkZThjMGIzNWRmNzYiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL2FjY291bnRzLmdvb2dsZS5jb20iLCJuYmYiOjE2ODk5OTA2NzUsImF1ZCI6IjIxNjI5NjAzNTgzNC1rMWs2cWUwNjBzMnRwMmEyamFtNGxqZGNtczAwc3R0Zy5hcHBzLmdvb2dsZXVzZXJjb250ZW50LmNvbSIsInN1YiI6IjEwMTc1NjE1NTQ4MjA2NzgwMDM4MSIsImVtYWlsIjoia2Noc2p0dUBnbWFpbC5jb20iLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiYXpwIjoiMjE2Mjk2MDM1ODM0LWsxazZxZTA2MHMydHAyYTJqYW00bGpkY21zMDBzdHRnLmFwcHMuZ29vZ2xldXNlcmNvbnRlbnQuY29tIiwibmFtZSI6IktldmluIENoZW4iLCJwaWN0dXJlIjoiaHR0cHM6Ly9saDMuZ29vZ2xldXNlcmNvbnRlbnQuY29tL2EvQUFjSFR0ZndBRFgzVVB3VnpuMWFtcGVOc0EzU0h6elZBNmVLQkpfTnhOcHFhZEJaPXM5Ni1jIiwiZ2l2ZW5fbmFtZSI6IktldmluIiwiZmFtaWx5X25hbWUiOiJDaGVuIiwiaWF0IjoxNjg5OTkwOTc1LCJleHAiOjE2ODk5OTQ1NzUsImp0aSI6IjkxYmFiZGQ2YmM3ZjljMTFhMGJhYTZlZmMwNzc5MzZlMTdmZGU4OTMifQ.vHOtdorzRaOhZae6BB1ESbv58xklGFAwO6numO7Rg2XqY43Dnv7huhPon2ehhppGtsSQb69fKEGGr7QOepKhgQpW90ro7NCgGmRhKD5f9Pu8zcWO4XvuW9C0gTcw5vtj51oOMdTsaZcI6W50gCOd41K9GrqFGQuR1HYuG-2T23Cgjn-eP2TLDP2Lr3P6166FdrFy2w92trqCPEI4rFWaYU2FmlJxiBNML64mGyN6-vr2oZ_ofXTeRQB5je5YpCHMGFGNrSr6XALWLsJQAJI-RWKOcsKJ29Fy4KNpunLnTafDKLLgAz5VoIpLdIDmW3rrQ5mxYEr8OtYTA9wbwjyOhw" rel="external nofollow noopener" target="_blank">Understanding Android Matrix transformations</a></li> <li><a href="https://blog.csdn.net/abcd1115313634/article/details/77982028" rel="external nofollow noopener" target="_blank">Android中使用Opencv自带JavaCameraView实现高帧率竖屏显示</a></li> </ol> <h4 id="图像大小">图像大小</h4> <p>默认是 800x600</p> <h2 id="调试">调试</h2> <p>在安卓开发中，有多种方式可以保存调试信息，以下是几种常见的方法：</p> <ol> <li>使用Logcat：Logcat是Android Studio自带的日志工具，可以在开发过程中打印调试信息。你可以使用Log.d()、Log.e()等方法打印不同级别的日志信息，并在Logcat控制台中查看。你可以使用过滤选项来过滤出你需要查看的日志信息。如果你想保存Logcat的日志，可以将日志导出到文件中。</li> <li>使用SharedPreferences：SharedPreferences是Android提供的轻量级存储解决方案，可以用来保存应用程序的配置信息和状态信息。你可以使用SharedPreferences保存一些调试信息，如应用程序的版本号、一些标志位等。</li> <li>使用文件：你可以将调试信息写入到本地文件中，然后在需要的时候读取。你可以使用Java中的FileInputStream、FileOutputStream等类来操作文件。</li> <li>使用第三方库：有许多第三方库可以用来保存调试信息，如Bugly、Firebase Crashlytics等。这些库可以帮助你收集应用程序的崩溃日志和异常信息，并将其报告给你。</li> </ol> <p><a href="https://developer.android.google.cn/studio/debug/am-logcat?hl=zh-cn#java" rel="external nofollow noopener" target="_blank">使用 Logcat 写入和查看日志</a></p> <h2 id="androidappactivity">Android.app.Activity</h2> <p><a href="https://developer.android.google.cn/guide/components/activities/intro-activities?hl=zh-cn" rel="external nofollow noopener" target="_blank">Activity 类</a>是 Android 应用的关键组件，而 Activity 的启动和组合方式则是该平台应用模型的基本组成部分。在编程范式中，应用是通过 main() 方法启动的，而 Android 系统与此不同，它会调用与其生命周期特定阶段相对应的特定回调方法来启动 Activity 实例中的代码。</p> <h4 id="oncreate">onCreate()</h4> <p>您必须实现此回调，它会在系统创建您的 Activity 时触发。您的实现应该初始化 Activity 的基本组件：例如，您的应用应该在此处创建视图并将数据绑定到列表。最重要的是，您必须在此处调用 <code class="language-plaintext highlighter-rouge">setContentView()</code> 来定义 Activity 界面的布局。</p> <p><code class="language-plaintext highlighter-rouge">onCreate()</code> 完成后，下一个回调将是 <code class="language-plaintext highlighter-rouge">onStart()</code>。</p> <h4 id="onstart">onStart()</h4> <p><code class="language-plaintext highlighter-rouge">onCreate()</code> 退出后，Activity 将进入“已启动”状态，并对用户可见。此回调包含 Activity 进入前台与用户进行互动之前的最后准备工作。</p> <h4 id="onresume">onResume()</h4> <p>系统会在 Activity 开始与用户互动之前调用此回调。此时，该 Activity 位于 Activity 堆栈的顶部，并会捕获所有用户输入。<strong>应用的大部分核心功能都是在 <code class="language-plaintext highlighter-rouge">onResume()</code> 方法中实现的。</strong></p> <p><code class="language-plaintext highlighter-rouge">onResume()</code> 回调后面总是跟着 <code class="language-plaintext highlighter-rouge">onPause()</code> 回调。</p> <h4 id="onpause">onPause()</h4> <p>当 Activity 失去焦点并进入“已暂停”状态时，系统就会调用 <code class="language-plaintext highlighter-rouge">onPause()</code>。例如，当用户点按“返回”或“最近使用的应用”按钮时，就会出现此状态。当系统为您的 Activity 调用 <code class="language-plaintext highlighter-rouge">onPause()</code> 时，从技术上来说，这意味着您的 Activity 仍然部分可见，但大多数情况下，这表明用户正在离开该 Activity，该 Activity 很快将进入“已停止”或“已恢复”状态。</p> <p>如果用户希望界面继续更新，则处于“已暂停”状态的 Activity 也可以继续更新界面。例如，显示导航地图屏幕或播放媒体播放器的 Activity 就属于此类 Activity。即使此类 Activity 失去了焦点，用户仍希望其界面继续更新。</p> <p>您<strong>不应使用</strong> <code class="language-plaintext highlighter-rouge">onPause()</code> 来保存应用或用户数据、进行网络呼叫或执行数据库事务。有关保存数据的信息，请参阅<a href="https://developer.android.google.cn/guide/components/activities/activity-lifecycle?hl=zh-cn#saras" rel="external nofollow noopener" target="_blank">保存和恢复 Activity 状态</a>。</p> <p><code class="language-plaintext highlighter-rouge">onPause()</code> 执行完毕后，下一个回调为 <code class="language-plaintext highlighter-rouge">onStop()</code>或 <code class="language-plaintext highlighter-rouge">onResume()</code>，具体取决于 Activity 进入“已暂停”状态后发生的情况。</p> <h4 id="onstop">onStop()</h4> <p>当 Activity 对用户不再可见时，系统会调用 <code class="language-plaintext highlighter-rouge">onStop()</code>。出现这种情况的原因可能是 Activity 被销毁，新的 Activity 启动，或者现有的 Activity 正在进入“已恢复”状态并覆盖了已停止的 Activity。在所有这些情况下，停止的 Activity 都将完全不再可见。</p> <p>系统调用的下一个回调将是 <code class="language-plaintext highlighter-rouge">onRestart()</code>（如果 Activity 重新与用户互动）或者 <code class="language-plaintext highlighter-rouge">onDestroy()</code>（如果 Activity 彻底终止）。</p> <h4 id="onrestart">onRestart()</h4> <p>当处于“已停止”状态的 Activity 即将重启时，系统就会调用此回调。<code class="language-plaintext highlighter-rouge">onRestart()</code> 会从 Activity 停止时的状态恢复 Activity。</p> <p>此回调后面总是跟着 <code class="language-plaintext highlighter-rouge">onStart()</code>。</p> <h4 id="ondestroy">onDestroy()</h4> <p>系统会在销毁 Activity 之前调用此回调。</p> <p>此回调是 Activity 接收的最后一个回调。通常，实现 <code class="language-plaintext highlighter-rouge">onDestroy()</code> 是为了确保在销毁 Activity 或包含该 Activity 的进程时释放该 Activity 的所有资源。</p> <h2 id="其他问题">其他问题</h2> <h3 id="不显示-menu">不显示 menu</h3> <p>AndroidManifest.xml 中</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>android:theme="@android:style/Theme.Holo.Light"
</code></pre></div></div> <p>或换成其他theme</p> <h3 id="设定启动时的-activity">设定启动时的 activity</h3> <p>启动时的 activity 称为 main activity。可以有多个 main activity。这个时候好像是在 manifest 排第一位的最终胜出。</p> <p>一般可以只保留一个 main activity。方法是把其他的 category 标签注释掉。</p> <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        <span class="nt">&lt;activity</span>
            <span class="na">android:name=</span><span class="s">".FdActivity"</span>
            <span class="na">android:exported=</span><span class="s">"true"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;intent-filter&gt;</span>
                <span class="nt">&lt;action</span> <span class="na">android:name=</span><span class="s">"android.intent.action.MAIN"</span> <span class="nt">/&gt;</span>

<span class="c">&lt;!--                &lt;category android:name="android.intent.category.LAUNCHER" /&gt;--&gt;</span>
            <span class="nt">&lt;/intent-filter&gt;</span>
        <span class="nt">&lt;/activity&gt;</span>
</code></pre></div></div> <h3 id="asserts-目录">Asserts 目录</h3> <p><a href="https://www.cnblogs.com/guanxinjing/p/9708583.html" rel="external nofollow noopener" target="_blank">Android资源文件分类</a></p> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2026/AIStack/">AI Stack</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2026/world_models/">World Models, JEPA</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2026/tracking/">Tracking</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2026/DiTF/">Diffusion Transformer</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2026/uie/">Under water enhancement</a> </li> </div> </div> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2026 Erkang Chen. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script defer src="/assets/js/bootstrap-toc.min.js?c82ff4de8b0955d6ff14f5b05eed7eb6"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script>let searchTheme=determineComputedTheme();const ninjaKeys=document.querySelector("ninja-keys");"dark"===searchTheme?ninjaKeys.classList.add("dark"):ninjaKeys.classList.remove("dark");const openSearchModal=()=>{const e=$("#navbarNav");e.hasClass("show")&&e.collapse("hide"),ninjaKeys.open()};</script> <script>const ninja=document.querySelector("ninja-keys");ninja.data=[{id:"nav-about",title:"about",section:"Navigation",handler:()=>{window.location.href="/"}},{id:"nav-blog",title:"blog",description:"",section:"Navigation",handler:()=>{window.location.href="/blog/"}},{id:"nav-publications",title:"publications",description:"publications by categories in reversed chronological order. generated by jekyll-scholar.",section:"Navigation",handler:()=>{window.location.href="/publications/"}},{id:"nav-projects",title:"projects",description:"A growing collection of your cool projects.",section:"Navigation",handler:()=>{window.location.href="/projects/"}},{id:"post-ai-stack",title:"AI Stack",description:"LLM, Agent, Diffusion, JEPA, world model, SSM",section:"Posts",handler:()=>{window.location.href="/blog/2026/AIStack/"}},{id:"post-world-models-jepa",title:"World Models, JEPA",description:"Marble, world labs, world model, JEPA",section:"Posts",handler:()=>{window.location.href="/blog/2026/world_models/"}},{id:"post-tracking",title:"Tracking",description:"\u5355\u76ee\u6807\u8ddf\u8e2a",section:"Posts",handler:()=>{window.location.href="/blog/2026/tracking/"}},{id:"post-diffusion-transformer",title:"Diffusion Transformer",description:"DiT, SD3, Flux, PixArt, DiTF",section:"Posts",handler:()=>{window.location.href="/blog/2026/DiTF/"}},{id:"post-under-water-enhancement",title:"Under water enhancement",description:"UIE, U-trans, DNnet, Five A+",section:"Posts",handler:()=>{window.location.href="/blog/2026/uie/"}},{id:"post-optical-flow",title:"Optical Flow",description:"RAFT, SEA-RAFT, Neuflow",section:"Posts",handler:()=>{window.location.href="/blog/2026/optical_flow/"}},{id:"post-teaching-tailored-to-talent",title:"Teaching Tailored To Talent",description:"Prompt, Depth-Anything, Diffusion, Image Restoration",section:"Posts",handler:()=>{window.location.href="/blog/2026/Teaching-Tailored-to-Talent/"}},{id:"post-vins-and-esvo2",title:"Vins And Esvo2",description:"VINS, ESVO, SFM",section:"Posts",handler:()=>{window.location.href="/blog/2025/VINS-and-ESVO2/"}},{id:"post-dino-\u5982\u4f55\u7528\u4e8e\u5bc6\u96c6\u9884\u6d4b",title:"DINO \u5982\u4f55\u7528\u4e8e\u5bc6\u96c6\u9884\u6d4b",description:"\u5982\u4f55\u4f7f\u7528DINO, DPT, RoPE",section:"Posts",handler:()=>{window.location.href="/blog/2025/dino/"}},{id:"post-3d-\u4efb\u52a1-sfm-mvs-nvs-vo-vio-slam",title:"3D \u4efb\u52a1\uff1aSFM, MVS, NVS, VO, VIO, SLAM",description:"\u591a\u89c6\u89d2\u51e0\u4f55\uff0c\u65b0\u89c6\u89d2\u751f\u6210",section:"Posts",handler:()=>{window.location.href="/blog/2025/3dtasks/"}},{id:"post-matplotlib\u8f93\u51fa\u4e2d\u6587",title:"Matplotlib\u8f93\u51fa\u4e2d\u6587",description:"\u7b80\u8981\u4ecb\u7ecd",section:"Posts",handler:()=>{window.location.href="/blog/2025/matplotlib%E8%BE%93%E5%87%BA%E4%B8%AD%E6%96%87/"}},{id:"post-mamba",title:"Mamba",description:"\u7b80\u8981\u4ecb\u7ecd",section:"Posts",handler:()=>{window.location.href="/blog/2025/mamba/"}},{id:"post-flow",title:"Flow",description:"\u7b80\u8981\u4ecb\u7ecd",section:"Posts",handler:()=>{window.location.href="/blog/2025/flow/"}},{id:"post-diffusion",title:"Diffusion",description:"\u7b80\u8981\u4ecb\u7ecd",section:"Posts",handler:()=>{window.location.href="/blog/2025/diffusion/"}},{id:"post-nerf-and-gaussian-splatting",title:"NeRF and Gaussian Splatting",description:"Gaussian Splatting, NeRF, Alpha-blending, Point-Based Rendering, Jacobian",section:"Posts",handler:()=>{window.location.href="/blog/2025/gaussianSplatting/"}},{id:"post-colmap",title:"COLMAP",description:"SFM",section:"Posts",handler:()=>{window.location.href="/blog/2025/sfm-mvs-rendering/"}},{id:"post-\u51b2\u6fc0\u4fe1\u53f7\u7684\u5c3a\u5ea6\u53d8\u6362",title:"\u51b2\u6fc0\u4fe1\u53f7\u7684\u5c3a\u5ea6\u53d8\u6362",description:"this is what included images could look like",section:"Posts",handler:()=>{window.location.href="/blog/2025/impulse/"}},{id:"post-\u4fe1\u53f7\u4e0e\u7cfb\u7edf\u8bfe\u7a0b\u7684\u6570\u5b66\u77e5\u8bc6",title:"\u4fe1\u53f7\u4e0e\u7cfb\u7edf\u8bfe\u7a0b\u7684\u6570\u5b66\u77e5\u8bc6",description:"this is what included images could look like",section:"Posts",handler:()=>{window.location.href="/blog/2025/math/"}},{id:"post-fisheye",title:"Fisheye",description:"\u7b80\u8981\u4ecb\u7ecd",section:"Posts",handler:()=>{window.location.href="/blog/2024/fisheye/"}},{id:"post-montecarlo",title:"Montecarlo",description:"\u7b80\u8981\u4ecb\u7ecd",section:"Posts",handler:()=>{window.location.href="/blog/2024/MonteCarlo/"}},{id:"post-\u5c0f\u6ce2\u5206\u6790",title:"\u5c0f\u6ce2\u5206\u6790",description:"\u7b80\u8981\u4ecb\u7ecd",section:"Posts",handler:()=>{window.location.href="/blog/2024/%E5%B0%8F%E6%B3%A2%E5%88%86%E6%9E%90/"}},{id:"post-lifeifei",title:"Lifeifei",description:"\u7b80\u8981\u4ecb\u7ecd",section:"Posts",handler:()=>{window.location.href="/blog/2024/Lifeifei/"}},{id:"post-orgmode",title:"Orgmode",description:"\u7b80\u8981\u4ecb\u7ecd",section:"Posts",handler:()=>{window.location.href="/blog/2024/orgmode/"}},{id:"post-python\u8fd0\u884c\u811a\u672c\u6216\u6a21\u5757",title:"Python\u8fd0\u884c\u811a\u672c\u6216\u6a21\u5757",description:"\u7b80\u8981\u4ecb\u7ecd",section:"Posts",handler:()=>{window.location.href="/blog/2024/Python%E8%BF%90%E8%A1%8C%E8%84%9A%E6%9C%AC%E6%88%96%E6%A8%A1%E5%9D%97/"}},{id:"post-proximal",title:"Proximal",description:"\u7b80\u8981\u4ecb\u7ecd",section:"Posts",handler:()=>{window.location.href="/blog/2024/proximal/"}},{id:"post-visualtransformer",title:"Visualtransformer",description:"\u7b80\u8981\u4ecb\u7ecd",section:"Posts",handler:()=>{window.location.href="/blog/2024/VisualTransformer/"}},{id:"post-pytorch-note",title:"Pytorch Note",description:"\u7b80\u8981\u4ecb\u7ecd",section:"Posts",handler:()=>{window.location.href="/blog/2024/Pytorch-note/"}},{id:"post-android-opencv-ndk",title:"Android Opencv Ndk",description:"\u7b80\u8981\u4ecb\u7ecd",section:"Posts",handler:()=>{window.location.href="/blog/2024/android-opencv-ndk/"}},{id:"post-repvgg",title:"Repvgg",description:"\u7b80\u8981\u4ecb\u7ecd",section:"Posts",handler:()=>{window.location.href="/blog/2024/RepVGG/"}},{id:"post-popularlibrary",title:"Popularlibrary",description:"\u7b80\u8981\u4ecb\u7ecd",section:"Posts",handler:()=>{window.location.href="/blog/2024/popularLibrary/"}},{id:"post-\u5148\u8fdb\u7684\u5b66\u4e60\u65b9\u6cd5",title:"\u5148\u8fdb\u7684\u5b66\u4e60\u65b9\u6cd5",description:"\u7b80\u8981\u4ecb\u7ecd",section:"Posts",handler:()=>{window.location.href="/blog/2024/%E5%85%88%E8%BF%9B%E7%9A%84%E5%AD%A6%E4%B9%A0%E6%96%B9%E6%B3%95/"}},{id:"post-one-stage-detection",title:"One Stage Detection",description:"\u7b80\u8981\u4ecb\u7ecd",section:"Posts",handler:()=>{window.location.href="/blog/2024/one-stage-detection/"}},{id:"post-polarization",title:"Polarization",description:"\u7b80\u8981\u4ecb\u7ecd",section:"Posts",handler:()=>{window.location.href="/blog/2024/polarization/"}},{id:"post-vae-vqvae-vagan",title:"Vae Vqvae Vagan",description:"\u7b80\u8981\u4ecb\u7ecd",section:"Posts",handler:()=>{window.location.href="/blog/2024/vae-vqvae-vagan/"}},{id:"post-multiple-object-tracking",title:"Multiple Object Tracking",description:"\u7b80\u8981\u4ecb\u7ecd",section:"Posts",handler:()=>{window.location.href="/blog/2024/Multiple-Object-Tracking/"}},{id:"post-\u77e9\u9635",title:"\u77e9\u9635",description:"Matrix",section:"Posts",handler:()=>{window.location.href="/blog/2024/Matrix/"}},{id:"post-typora-and-jekyll",title:"Typora and Jekyll",description:"this is what included images could look like",section:"Posts",handler:()=>{window.location.href="/blog/2024/images/"}},{id:"news-a-simple-inline-announcement",title:"A simple inline announcement.",description:"",section:"News"},{id:"news-a-long-announcement-with-details",title:"A long announcement with details",description:"",section:"News",handler:()=>{window.location.href="/news/announcement_2/"}},{id:"news-a-simple-inline-announcement-with-markdown-emoji-sparkles-smile",title:'A simple inline announcement with Markdown emoji! <img class="emoji" title=":sparkles:" alt=":sparkles:" src="https://github.githubassets.com/images/icons/emoji/unicode/2728.png" height="20" width="20"> <img class="emoji" title=":smile:" alt=":smile:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png" height="20" width="20">',description:"",section:"News"},{id:"projects-yolo-object-detection",title:"YOLO Object Detection",description:"A responsive demo of YOLO object detection with gallery and interactive app.",section:"Projects",handler:()=>{window.location.href="/projects/yolo_demo/"}},{id:"socials-email",title:"Send email",section:"Socials",handler:()=>{window.open("mailto:%63%65%6B%78%6D@%71%71.%63%6F%6D","_blank")}},{id:"socials-google-scholar",title:"Google Scholar",section:"Socials",handler:()=>{window.open("https://scholar.google.com/citations?user=hWo1RTsAAAAJ","_blank")}},{id:"light-theme",title:"Change theme to light",description:"Change the theme of the site to Light",section:"Theme",handler:()=>{setThemeSetting("light")}},{id:"dark-theme",title:"Change theme to dark",description:"Change the theme of the site to Dark",section:"Theme",handler:()=>{setThemeSetting("dark")}},{id:"system-theme",title:"Use system default theme",description:"Change the theme of the site to System Default",section:"Theme",handler:()=>{setThemeSetting("system")}}];</script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>